<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ü—É—Ç—å –ü–∏—Ç–æ–Ω–∏—Å—Ç–∞</title>
    <link href="style.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <div id="app">
      <div class="app-header">
        <h1 class="app-title">üêç –ü—É—Ç—å –ü–∏—Ç–æ–Ω–∏—Å—Ç–∞</h1>
        <p class="app-subtitle">9 –∫–ª—é—á–µ–≤—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –¥–ª—è –æ—Å–≤–æ–µ–Ω–∏—è Python</p>
      </div>

      <div id="content">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
      </div>
    </div>

    <script>
      // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      const contentDiv = document.getElementById("content");
      let sectionsData = {};
      let currentSection = null;
      let currentLesson = null;

      // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
      async function loadSections() {
        const response = await fetch("sections.json");
        sectionsData = await response.json();
        renderSections();
      }

      // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤
      function renderSections() {
        let html = '<div class="sections-grid">';

        for (const [id, section] of Object.entries(sectionsData)) {
          html += `
          <div class="section-card" onclick="showLessons('${id}')">
            <div class="section-image-container">
              <img src="images/${section.image}" class="section-image" alt="${section.title}">
            </div>
            <div class="section-content">
              <h3 class="section-title">${section.title}</h3>
              <p class="section-description">${section.description}</p>
            </div>
            <div class="section-number">${id}</div>
          </div>
        `;
        }

        html += "</div>";
        contentDiv.innerHTML = html;
      }

      // –ü–æ–∫–∞–∑–∞—Ç—å —É—Ä–æ–∫–∏ —Ä–∞–∑–¥–µ–ª–∞
      function showLessons(sectionId) {
        currentSection = sectionId;
        const section = sectionsData[sectionId];

        let html = `
        <button class="btn btn-outline" onclick="renderSections()">
          ‚Üê –í—Å–µ —Ä–∞–∑–¥–µ–ª—ã
        </button>
        
        <div class="lesson-container">
          <div class="lesson-header">
            <h1 class="lesson-title">${section.title}</h1>
            <p>${section.description}</p>
          </div>
      `;

        for (const [lessonId, lesson] of Object.entries(section.lessons)) {
          html += `
          <div class="lesson-card" onclick="showLesson('${lessonId}')">
            <h3>${lesson.title}</h3>
            <div class="lesson-preview">${lesson.content.substring(
              0,
              100
            )}...</div>
          </div>
        `;
        }

        html += "</div>";
        contentDiv.innerHTML = html;
      }

      // –ü–æ–∫–∞–∑–∞—Ç—å —É—Ä–æ–∫
      function showLesson(lessonId) {
        currentLesson = lessonId;
        const lesson = sectionsData[currentSection].lessons[lessonId];

        const html = `
        <button class="btn btn-outline" onclick="showLessons('${currentSection}')">
          ‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–∞–∑–¥–µ–ª—É
        </button>
        
        <div class="lesson-container">
          <h1 class="lesson-title">${lesson.title}</h1>
          
          ${
            lesson.image
              ? `
            <img src="images/${lesson.image}" class="lesson-image" alt="${lesson.title}">
          `
              : ""
          }
          
          <div class="lesson-content">
            ${lesson.content}
          </div>
          
          <button class="btn" onclick="startTask('${lessonId}')">
            –ù–∞—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ ‚Üí
          </button>
        </div>
      `;

        contentDiv.innerHTML = html;
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      document.addEventListener("DOMContentLoaded", loadSections);
    </script>
  </body>
</html>
