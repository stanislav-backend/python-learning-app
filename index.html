<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü—É—Ç—å –ü–∏—Ç–æ–Ω–∏—Å—Ç–∞</title>
  <link href="style.css" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <div class="header">
      <h1>üêç –ü—É—Ç—å –ü–∏—Ç–æ–Ω–∏—Å—Ç–∞</h1>
      <p>–û—Å–≤–æ–π Python –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</p>
    </div>
    
    <div id="content">
      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
    </div>
  </div>

  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    const contentDiv = document.getElementById('content');
    let sectionsData = {};
    let currentSection = null;
    let currentLesson = null;

    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    async function loadSections() {
      const response = await fetch('sections.json');
      sectionsData = await response.json();
      renderSections();
    }

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤
    function renderSections() {
      let html = '<div class="sections-grid">';
      
      for (const [id, section] of Object.entries(sectionsData)) {
        const isLocked = section.locked;
        
        html += `
          <div class="section-card ${isLocked ? 'locked' : ''}" 
               onclick="${isLocked ? '' : `showLessons('${id}')`}"
               style="animation-delay: ${parseInt(id)*0.1}s">
            <div class="section-icon">${section.icon}</div>
            <h3 class="section-title">${section.title}</h3>
            <p class="section-description">${section.description}</p>
            ${isLocked ? '<div class="lock-badge">üîí</div>' : ''}
          </div>
        `;
      }
      
      html += '</div>';
      contentDiv.innerHTML = html;
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —É—Ä–æ–∫–∏ —Ä–∞–∑–¥–µ–ª–∞
    function showLessons(sectionId) {
      currentSection = sectionId;
      const section = sectionsData[sectionId];
      
      let html = `
        <div class="back-btn" onclick="renderSections()">‚Üê –í—Å–µ —Ä–∞–∑–¥–µ–ª—ã</div>
        <h2 class="section-header">${section.title}</h2>
        <div class="lessons-list">
      `;
      
      for (const [lessonId, lesson] of Object.entries(section.lessons)) {
        html += `
          <div class="lesson-card" onclick="showLesson('${lessonId}')">
            <div class="lesson-icon">üìö</div>
            <div class="lesson-info">
              <h3>${lesson.title}</h3>
              <p>${lesson.content.substring(0, 60)}...</p>
            </div>
          </div>
        `;
      }
      
      html += '</div>';
      contentDiv.innerHTML = html;
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —É—Ä–æ–∫
    function showLesson(lessonId) {
      currentLesson = lessonId;
      const lesson = sectionsData[currentSection].lessons[lessonId];
      
      const html = `
        <div class="back-btn" onclick="showLessons('${currentSection}')">‚Üê ${sectionsData[currentSection].title}</div>
        <div class="lesson-container">
          <h1 class="lesson-title">${lesson.title}</h1>
          <div class="lesson-content">${lesson.content}</div>
          <button class="btn" onclick="startTask()">–ù–∞—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ ‚Üí</button>
        </div>
      `;
      
      contentDiv.innerHTML = html;
    }

    // –ù–∞—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ
    function startTask() {
      const task = sectionsData[currentSection].lessons[currentLesson].tasks[0];
      
      const html = `
        <div class="back-btn" onclick="showLesson('${currentLesson}')">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Ä–æ–∫—É</div>
        <div class="task-container">
          <h2>–ó–∞–¥–∞–Ω–∏–µ</h2>
          <div class="task-question">${task.question}</div>
          <div class="task-options">
            ${task.options.map((option, index) => `
              <div class="option" onclick="checkAnswer(${index}, ${task.correct})">
                ${option}
              </div>
            `).join('')}
          </div>
        </div>
      `;
      
      contentDiv.innerHTML = html;
    }

    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç
    function checkAnswer(selected, correct) {
      const options = document.querySelectorAll('.option');
      
      options.forEach((opt, idx) => {
        if (idx === correct) {
          opt.classList.add('correct');
        }
        if (idx === selected && idx !== correct) {
          opt.classList.add('wrong');
        }
        opt.style.pointerEvents = 'none';
      });
      
      setTimeout(() => {
        if (selected === correct) {
          alert('‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!');
        } else {
          alert('‚ùå –ù–µ–≤–µ—Ä–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑');
        }
      }, 300);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', loadSections);
  </script>
</body>
</html>
